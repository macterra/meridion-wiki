# $Id: Makefile,v 1.25 2002/02/23 05:53:54 carstenklapp Exp $
#
# locale/Makefile
#
# This is a replacement for locale/translate.sh to avoid remaking
# files that don't need to be remade.
#

POT_FILE = po/phpwiki.pot

.PHONY: all po mo clean dep

all	: po mo
po 	: # dependencies are auto-generated by 'make dep' , see below
mo	: # dependencies are auto-generated by 'make dep' , see below

${POT_FILE} : # dependencies are auto-generated by 'make dep' , see below
	xgettext -L C++ -k_ -k__printf -k__sprintf -k__vsprintf -kfmt -o $@ $^

po/%.po : ${POT_FILE}
	test -f $@ || touch $@
	cp -f $@ $@~
	msgmerge -o $@.new $@~ $^ && mv -f $@.new $@

%/LC_MESSAGES/phpwiki.mo : po/%.po
	mkdir -p $*/LC_MESSAGES
	msgfmt -o $@ $<

# Generate .php from .mo rather than .po to maximize
# the probability of agreement between .mo and .php files.
%/LC_MESSAGES/phpwiki.php : %/LC_MESSAGES/phpwiki.mo
	msgunfmt $< | awk -f make-php-trans.awk > $@

clean :
	rm -f ${POT_FILE} ${MO_FILES} ${PHP_FILES}

dep :
	$(SHELL) update-makefile.sh


# DO NOT DELETE THIS LINE
#
# The remainder of this file is auto-generated
#
# (Run 'make dep' to regenerate this section.)
#
po: po/de.po
mo: de/LC_MESSAGES/phpwiki.mo de/LC_MESSAGES/phpwiki.php
po: po/es.po
mo: es/LC_MESSAGES/phpwiki.mo es/LC_MESSAGES/phpwiki.php
po: po/fr.po
mo: fr/LC_MESSAGES/phpwiki.mo fr/LC_MESSAGES/phpwiki.php
po: po/it.po
mo: it/LC_MESSAGES/phpwiki.mo it/LC_MESSAGES/phpwiki.php
po: po/nl.po
mo: nl/LC_MESSAGES/phpwiki.mo nl/LC_MESSAGES/phpwiki.php
po: po/sv.po
mo: sv/LC_MESSAGES/phpwiki.mo sv/LC_MESSAGES/phpwiki.php
#
${POT_FILE}: ../lib/ArchiveCleaner.php
${POT_FILE}: ../lib/BlockParser.php
${POT_FILE}: ../lib/config.php
${POT_FILE}: ../lib/DbaDatabase.php
${POT_FILE}: ../lib/DbaListSet.php
${POT_FILE}: ../lib/DbaPartition.php
${POT_FILE}: ../lib/diff.php
${POT_FILE}: ../lib/diff3.php
${POT_FILE}: ../lib/difflib.php
${POT_FILE}: ../lib/display.php
${POT_FILE}: ../lib/editpage.php
${POT_FILE}: ../lib/ErrorManager.php
${POT_FILE}: ../lib/FileFinder.php
${POT_FILE}: ../lib/HtmlElement.php
${POT_FILE}: ../lib/InlineParser.php
${POT_FILE}: ../lib/interwiki.php
${POT_FILE}: ../lib/loadsave.php
${POT_FILE}: ../lib/main.php
${POT_FILE}: ../lib/PageList.php
${POT_FILE}: ../lib/PageType.php
${POT_FILE}: ../lib/plugin/AllPages.php
${POT_FILE}: ../lib/plugin/_BackendInfo.php
${POT_FILE}: ../lib/plugin/BackLinks.php
${POT_FILE}: ../lib/plugin/Calendar.php
${POT_FILE}: ../lib/plugin/FullTextSearch.php
${POT_FILE}: ../lib/plugin/FuzzyPages.php
${POT_FILE}: ../lib/plugin/HelloWorld.php
${POT_FILE}: ../lib/plugin/IncludePage.php
${POT_FILE}: ../lib/plugin/Info.php
${POT_FILE}: ../lib/plugin/LikePages.php
${POT_FILE}: ../lib/plugin/MostPopular.php
${POT_FILE}: ../lib/plugin/OrphanedPages.php
${POT_FILE}: ../lib/plugin/PageGroup.php
${POT_FILE}: ../lib/plugin/PageHistory.php
${POT_FILE}: ../lib/plugin/RandomPage.php
${POT_FILE}: ../lib/plugin/RawHtml.php
${POT_FILE}: ../lib/plugin/RecentChanges.php
${POT_FILE}: ../lib/plugin/text2png.php
${POT_FILE}: ../lib/plugin/TitleSearch.php
${POT_FILE}: ../lib/plugin/UserPreferences.php
${POT_FILE}: ../lib/plugin/WikiForm.php
${POT_FILE}: ../lib/prepend.php
${POT_FILE}: ../lib/removepage.php
${POT_FILE}: ../lib/Request.php
${POT_FILE}: ../lib/RssWriter.php
${POT_FILE}: ../lib/RSSWriter091.php
${POT_FILE}: ../lib/stdlib.php
${POT_FILE}: ../lib/Template.php
${POT_FILE}: ../lib/TextSearchQuery.php
${POT_FILE}: ../lib/Theme.php
${POT_FILE}: ../lib/transform.php
${POT_FILE}: ../lib/WikiCallback.php
${POT_FILE}: ../lib/WikiDB.php
${POT_FILE}: ../lib/WikiDB/ADODB.php
${POT_FILE}: ../lib/WikiDB/adodb/adodb.inc.php
${POT_FILE}: ../lib/WikiDB/adodb/adodb-access.inc.php
${POT_FILE}: ../lib/WikiDB/adodb/adodb-errorhandler.inc.php
${POT_FILE}: ../lib/WikiDB/adodb/adodb-errorpear.inc.php
${POT_FILE}: ../lib/WikiDB/adodb/adodb-lib.inc.php
${POT_FILE}: ../lib/WikiDB/adodb/adodb-mysql.inc.php
${POT_FILE}: ../lib/WikiDB/backend.php
${POT_FILE}: ../lib/WikiDB/backend/ADODB.php
${POT_FILE}: ../lib/WikiDB/backend/ADODB_mysql.php
${POT_FILE}: ../lib/WikiDB/backend/cvs.php
${POT_FILE}: ../lib/WikiDB/backend/dba.php
${POT_FILE}: ../lib/WikiDB/backend/dbaBase.php
${POT_FILE}: ../lib/WikiDB/backend/dumb/AllRevisionsIter.php
${POT_FILE}: ../lib/WikiDB/backend/dumb/BackLinkIter.php
${POT_FILE}: ../lib/WikiDB/backend/dumb/MostPopularIter.php
${POT_FILE}: ../lib/WikiDB/backend/dumb/MostRecentIter.php
${POT_FILE}: ../lib/WikiDB/backend/dumb/TextSearchIter.php
${POT_FILE}: ../lib/WikiDB/backend/mysql.php
${POT_FILE}: ../lib/WikiDB/backend/PearDB.php
${POT_FILE}: ../lib/WikiDB/backend/pgsql.php
${POT_FILE}: ../lib/WikiDB/cvs.php
${POT_FILE}: ../lib/WikiDB/dba.php
${POT_FILE}: ../lib/WikiDB/SQL.php
${POT_FILE}: ../lib/WikiPlugin.php
${POT_FILE}: ../lib/WikiUser.php
${POT_FILE}: ../lib/XmlElement.php
${POT_FILE}: ../lib/ziplib.php
${POT_FILE}: ../themes/default/templates/actionbar.tmpl
${POT_FILE}: ../themes/default/templates/body.tmpl
${POT_FILE}: ../themes/default/templates/browse.tmpl
${POT_FILE}: ../themes/default/templates/debug.tmpl
${POT_FILE}: ../themes/default/templates/editpage.tmpl
${POT_FILE}: ../themes/default/templates/info.tmpl
${POT_FILE}: ../themes/default/templates/login.tmpl
${POT_FILE}: ../themes/default/templates/navbar.tmpl
${POT_FILE}: ../themes/default/templates/nochanges.tmpl
${POT_FILE}: ../themes/default/templates/savepage.tmpl
${POT_FILE}: ../themes/default/templates/signin.tmpl
${POT_FILE}: ../themes/default/templates/top.tmpl
${POT_FILE}: ../themes/default/templates/top-htmldump.tmpl
${POT_FILE}: ../themes/default/templates/userprefs.tmpl
${POT_FILE}: ../themes/default/templates/viewsource.tmpl
${POT_FILE}: ../themes/default/themeinfo.php
${POT_FILE}: ../themes/Hawaiian/lib/random.php
${POT_FILE}: ../themes/Hawaiian/themeinfo.php
${POT_FILE}: ../themes/MacOSX/lib/RecentChanges.php
${POT_FILE}: ../themes/MacOSX/themeinfo.php
${POT_FILE}: ../themes/Portland/lib/RecentChanges.php
${POT_FILE}: ../themes/Portland/templates/actionbar.tmpl
${POT_FILE}: ../themes/Portland/templates/body.tmpl
${POT_FILE}: ../themes/Portland/templates/browse.tmpl
${POT_FILE}: ../themes/Portland/templates/editpage.tmpl
${POT_FILE}: ../themes/Portland/templates/navbar.tmpl
${POT_FILE}: ../themes/Portland/templates/viewsource.tmpl
${POT_FILE}: ../themes/Portland/themeinfo.php
${POT_FILE}: ../themes/Sidebar/themeinfo.php
${POT_FILE}: ../themes/SpaceWiki/lib/RecentChanges.php
${POT_FILE}: ../themes/SpaceWiki/themeinfo.php
